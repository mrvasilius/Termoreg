# Система поддержания температуры Termoreg

## Функционал
1. Показ текущей температуры
2. Поддержание заданной температуры
3. Подключение к MQTT через Wi-Fi 
4. Ручной ввод температуры и режима (энкодер)
5. Ввод температуры и режима через MQTT
6. Публикация температуры, режима и статуса в MQTT (в т.ч. InfluxDB формат)
7. Сигнализация диодом о включении нагрева

## Настройка

### Режимы работы
1. "Включено"  
В данном режиме реле нагревателя постоянно включено.
2. "Выключено"  
В данном режиме реле нагревателя постоянно выключено.
3. "АВТО"  
В данном режиме реле включается при понижении температуры ниже установленной и выключается при превышении.

### Состояния
Система имеет 4 состояния: 
1. Принудительно включен нагрев
2. Принудительно выключен нагрев
3. Автоматически включен нагрев
4. Автоматически выключен нагрев

### Индикация
В режиме ожидания на дисплее отображается текущая температура. Если задан режим "АВТО" то последним символом отобразится "А".  
В режиме натройки на дисплее отображаются задаваемые параметры.  
При бездействии пользователя в течении 10 секунд, устройство перейдет в режим ожидания с сохранением всех изменений.  

### Управление с энкодера
1. Поворот энкодера в любую сторону запускает режим установки требуемой температуры. При этом на дисплее отобразятся буквы "Ed" и значение установленной температуры. Вращением энкодера по и против часовой стрелки можно увеличивать или уменьшать требуемую температуру соответственно.
2. Нажатие на энкодер переводит устройство в режим выбора режима работы. Вращением энкодера в этом режиме можно выбирать режимы "On", "Off" и "Auto" циклично.
3. Следующее нажатие на энкодер переводит устройство в режим выбора датчика. Если к устройству подключено более одного датчика, то поворотом энкодера можно выбрать тот, на который будет опираться сравнение температуры с заданной.
4. При следующем нажатии устройство перейдет в режим ожидания с сохранением всех изменений.